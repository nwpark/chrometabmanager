<div class="column-header">
  <span style="float: right">
    <button
      mat-icon-button
      title="debug"
      *ngIf="debugModeEnabled()"
      (click)="debug()">
      <mat-icon class="action-icon-24">bug_report</mat-icon>
    </button>
    <ng-container *ngFor="let button of actionButtons">
      <button
        mat-icon-button
        [title]="windowListState.layoutState.hidden ? button.titleWhenHidden : button.title"
        (click)="button.callback()">
        <mat-icon class="action-icon-24" *ngIf="!windowListState.layoutState.hidden">{{button.icon}}</mat-icon>
        <mat-icon class="action-icon-24" *ngIf="windowListState.layoutState.hidden">{{button.iconWhenHidden || button.icon}}</mat-icon>
      </button>
    </ng-container>
  </span>
  <span class="column-title-text">
    {{title}}
  </span>
</div>

<div class="column-scrollable-content">
  <div
    cdkDropList
    *ngIf="!windowListState.layoutState.hidden || isWindowListAnimating()"
    [@collapse-list]="animationState"
    (@collapse-list.done)="completeToggleDisplayAnimation($event)"
    [id]="windowProps.windowListId"
    [cdkDropListData]="windowProps"
    [cdkDropListConnectedTo]="connectedWindowListIds"
    (cdkDropListDropped)="windowDropped($event)">
    <div
      cdkDrag
      *ngFor="let layoutState of windowListState.layoutState.windowStates"
      [@close-window]="windowAnimationStates[layoutState.windowId]"
      (@close-window.done)="completeCloseWindow($event, layoutState)"
      [cdkDragData]="windowListState.getWindow(layoutState.windowId)"
      (cdkDragStarted)="beginDrag()">
      <div
        class="chrome-window-container"
        *ngIf="windowListState.getWindow(layoutState.windowId).type === 'normal' && !layoutState.deleted">
        <div cdkDragHandle>
          <app-chrome-window-header
            [chromeAPIWindow]="windowListState.getWindow(layoutState.windowId)"
            [layoutState]="layoutState"
            [props]="windowProps"
            (chromeWindowClose)="closeWindow(layoutState)"
            (chromeWindowToggleDisplay)="toggleWindowDisplay(layoutState)">
          </app-chrome-window-header>
        </div>
        <div
          *ngIf="!layoutState.hidden || isWindowAnimating(layoutState)"
          [@collapse-window]="windowAnimationStates[layoutState.windowId]"
          (@collapse-window.done)="completeToggleWindowDisplay($event, layoutState)">
          <app-chrome-window
            [chromeAPIWindow]="windowListState.getWindow(layoutState.windowId)"
            [layoutState]="layoutState"
            [props]="windowProps">
          </app-chrome-window>
        </div>
      </div>
    </div>
  </div>
</div>
